<!DOCTYPE html>
<html>
<head>
  <!-- Include the intlTelInput library CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/css/intlTelInput.min.css">

  <!-- Include the Inputmask library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/inputmask/5.0.6/jquery.inputmask.min.js"></script>
  
  <!-- Include the libphonenumber library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/libphonenumber-js/1.9.17/libphonenumber-js.min.js"></script>
  
  <style>
    .error {
      border-color: red;
    }
  </style>
</head>
<body>

<form>
  <label for="phone">Phone:</label>
  <input type="tel" id="phone" placeholder="">
</form>

<!-- Include the intlTelInput library script -->
<script src="https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/js/intlTelInput.min.js"></script>
<script>
  // Initialize intl-tel-input on the phone input field
  const phoneInput = document.getElementById('phone');
  const iti = window.intlTelInput(phoneInput, {
    utilsScript: 'https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/js/utils.js'
  });

  // Initialize Inputmask on the phone input field
  const inputMaskOptions = {
    mask: '+{1,}-{0,}0{0,}',
    placeholder: '',
    definitions: {
      '1': {
        validator: '[0-9]'
      }
    }
  };

  // Initialize Inputmask
  $(phoneInput).inputmask(inputMaskOptions);

  // Listen for the "countrychange" event to update the input mask and placeholder
  iti.promise.then(function () {
    iti.selectedCountryData.dialCodeElement.addEventListener('countrychange', function () {
      const selectedCountry = iti.getSelectedCountryData();
      inputMaskOptions.mask = '+' + selectedCountry.dialCode + '-{0,}0{0,}';
      $(phoneInput).inputmask(inputMaskOptions);
    });
  });
</script>

</body>
</html>
